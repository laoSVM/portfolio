<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Drawer Scroll Effect — Themed</title>
  <link rel="stylesheet" href="css/main.css" />
  <style>
    /* Reset and base */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }

    /* Use site theme variables, but keep cursor visible on this standalone page */
    body {
      font-family: var(--font-primary);
      background: var(--background);
      color: var(--text-primary);
      overflow-x: hidden;
      overflow-y: auto;
      cursor: auto !important;
    }
    a, button, input, textarea, select, [role="button"], [onclick] {
      cursor: auto !important;
    }

    /* creates scrollable space */
    .page-container { height: 600vh; position: relative; }

    /* fixed viewport wrapper that holds absolute sections */
    .sections-wrapper {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100vh;
      pointer-events: none; /* let page scrolling pass through; each section itself allows interactions */
    }

    /* each full-screen layer */
    .drawer-section {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: auto; /* allow clicks inside */
      transition: transform 320ms cubic-bezier(.2,.9,.2,1);
      will-change: transform;
      /* subtle themed shadow */
      box-shadow: var(--shadow-lg) inset 0 0 0 rgba(0,0,0,0);
    }


    /* background layer for first section */
    .drawer-section--has-bg { position: relative; }
    .drawer-section--has-bg .drawer-bg {
      position: absolute; inset: 0; overflow: hidden; z-index: 0;
    }
    .drawer-hero-canvas {
      position: absolute; inset: 0; width: 100%; height: 100%; display: block; pointer-events: none;
    }
    /* reuse site's grid animation via hero__lines, ensure it sits above canvas */
    .drawer-section--has-bg .hero__lines { 
      pointer-events: none; 
      z-index: 1; 
      opacity: 0.6;
      position: absolute;
      top: -50px;
      left: -50px;
      width: calc(100% + 100px);
      height: calc(100% + 100px);
      background-image: 
        linear-gradient(90deg, var(--border) 1px, transparent 1px),
        linear-gradient(var(--border) 1px, transparent 1px);
      background-size: 50px 50px;
      animation: moveLines 20s linear infinite;
    }

    @keyframes moveLines {
      0% { transform: translate(0, 0); }
      100% { transform: translate(50px, 50px); }
    }

    .drawer-section#hero {
      align-items: flex-start;    /* vertical alignment: top */
      justify-content: flex-start; /* horizontal alignment: left */
    }

    .drawer-section#about {
      align-items: flex-start;    /* vertical alignment: top */
      justify-content: flex-start; /* horizontal alignment: left */
    }

    .drawer-section#projects {
      align-items: flex-start;    /* vertical alignment: top */
      justify-content: flex-start; /* horizontal alignment: left */
    }

    .drawer-section#experience {
      align-items: flex-start;    /* vertical alignment: top */
      justify-content: flex-start; /* horizontal alignment: left */
    }

    /* stacking order (later sections above earlier ones) and themed backgrounds */
    .drawer-section:nth-child(1){ z-index: 1; background: var(--background); }
    .drawer-section:nth-child(2){ z-index: 2; background: var(--surface); border-top-left-radius: var(--radius-3xl); border-top-right-radius: var(--radius-3xl); overflow: hidden; }
    .drawer-section:nth-child(3){ z-index: 3; background: var(--accent); border-top-left-radius: var(--radius-3xl); border-top-right-radius: var(--radius-3xl); overflow: hidden; }
    .drawer-section:nth-child(4){ z-index: 4; background: var(--accent-light); border-top-left-radius: var(--radius-3xl); border-top-right-radius: var(--radius-3xl); overflow: hidden; }
    .drawer-section:nth-child(5){ z-index: 5; background: var(--background); border-top-left-radius: var(--radius-3xl); border-top-right-radius: var(--radius-3xl); overflow: hidden; }

    /* content area — themed text colors; this is the only thing that fades */
    .section-content {
      text-align: center; color: var(--text-primary); padding: 0 6vw;
      position: relative; z-index: 2;
      transition: opacity 260ms linear;
      will-change: opacity;
      width: 100%;
      max-width: 100%;
    }

    .section-content h1 { font-size: clamp(2.2rem, 7vw, 4.4rem); margin-bottom: 0.75rem; line-height: 1.05; }
    .section-content p { font-size: clamp(1rem, 2vw, 1.3rem); opacity: 0.95; margin-bottom: 1.25rem; font-weight: 400; color: var(--text-secondary); }

    .cta-button {
      display: inline-block; padding: 0.9rem 2rem;
      background: var(--primary); border: 2px solid var(--primary);
      border-radius: 40px; color: var(--white); text-decoration: none; font-weight: 600;
      transition: transform var(--transition-base), box-shadow var(--transition-base), background var(--transition-base);
      box-shadow: var(--shadow-md);
    }
    .cta-button:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); background: var(--primary-dark); }

    .scroll-indicator { position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%); z-index: 300; color: var(--text-secondary); text-align:center; transition: opacity 220ms linear; }
    .scroll-indicator svg{ width: 28px; height: 28px; fill: var(--text-secondary); opacity: 0.75; }
    .scroll-text { font-size: 0.9rem; opacity: 0.75; margin-top: 0.45rem; }

    .nav-dots { position: fixed; right: 2rem; top: 50%; transform: translateY(-50%); z-index: 300; display:flex; flex-direction: column; gap: 0.9rem; }
    .nav-dot { width: 12px; height: 12px; border-radius: 50%; background: var(--surface); border: 2px solid var(--border); cursor: pointer; transition: all 180ms ease; }
    .nav-dot.active { background: var(--primary); border-color: var(--primary); transform: scale(1.2); }
    
    /* Top navigation bar */
    .hero-nav {
      position: absolute;
      top: 0;
      left: 6vw;
      right: 6vw;
      height: var(--nav-height);
      z-index: 10;
      pointer-events: auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 88vw;
      margin-left: 0;
    }
    
    .hero-nav .nav-text {
      color: var(--text-primary);
      font-weight: 600;
      font-size: 1.1rem;
    }
    
    .hero-nav .nav-links {
      display: flex;
      gap: 2rem;
    }
    
    .hero-nav .nav-link {
      position: relative;
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 0.95rem;
      padding: var(--space-xs) 0;
      transition: color var(--transition-base);
    }
    
    .hero-nav .nav-link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary);
      transition: width var(--transition-base);
    }
    
    .hero-nav .nav-link:hover {
      color: var(--primary);
    }
    
    .hero-nav .nav-link:hover::after {
      width: 100%;
    }

    /* Giant headline and content for first section */
    .hero-header {
      margin-top: 24vh;
      max-width: 88vw;
      text-align: left;
    }
    .hero-headline {
      font-weight: 800;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: var(--text-primary);
      line-height: 0.9;
      width: 75vw; /* cover ~3/4 of screen width */
      font-size: clamp(4rem, 12vw, 18rem);
      white-space: nowrap;
      margin: 0;
      padding: 0;
      text-indent: -0.05em; /* Optical adjustment for large fonts */
    }
    .hero-header p {
      margin-top: var(--space-sm);
      font-size: clamp(1rem, 2vw, 1.25rem);
      color: var(--text-secondary);
      max-width: 60vw;
    }
    
    /* About section specific styles */
    .about-header {
      text-align: left;
      max-width: 88vw;
      width: 70%;
      margin-top: 12vh;
    }

    .about-title {
      font-size: clamp(3.5rem, 10vw, 8rem);
      font-weight: 800;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      color: var(--text-primary);
      line-height: 0.9;
      margin-bottom: var(--space-lg);
    }

    .about-description {
      margin-bottom: var(--space-xl);
    }

    .about-description p {
      font-size: clamp(1rem, 2vw, 1.25rem);
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: var(--space-md);
    }

    .about-stats {
      display: flex;
      gap: var(--space-xl);
      margin-top: var(--space-xl);
    }

    .stat-card {
      text-align: center;
      padding: var(--space-lg) var(--space-md);
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      backdrop-filter: blur(10px);
      transition: transform var(--transition-base), box-shadow var(--transition-base);
      min-width: 120px;
    }

    .stat-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .stat-number {
      font-size: clamp(2rem, 4vw, 3rem);
      font-weight: 700;
      color: var(--primary);
      margin-bottom: var(--space-xs);
      line-height: 1;
    }

    .stat-label {
      font-size: clamp(0.85rem, 1.5vw, 1rem);
      color: var(--text-secondary);
      font-weight: 500;
      margin: 0;
    }

    .about-image {
      position: absolute;
      right: 8vw;
      top: 50%;
      transform: translateY(-50%);
      margin-top: 6vh;
      max-width: 25vw;
      z-index: 1;
    }

    .about-image-container {
      position: relative;
      width: 100%;
      max-width: 350px;
      margin: 0 auto;
    }

    .about-photo {
      max-width: 100%;
      height: auto;
      border-radius: var(--radius-lg);
      filter: drop-shadow(var(--shadow-lg));
      object-fit: cover;
    }

    /* Projects section specific styles */
    .projects-header {
      text-align: left;
      max-width: 88vw;
      margin-top: 12vh;
    }

    .projects-title {
      font-size: clamp(3.5rem, 10vw, 8rem);
      font-weight: 800;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      color: var(--text-primary);
      line-height: 0.9;
      margin-bottom: var(--space-lg);
    }

    .projects-description {
      margin-bottom: var(--space-xl);
      max-width: 60vw;
    }

    .projects-filters {
      display: flex;
      gap: var(--space-md);
      margin-bottom: var(--space-xl);
      flex-wrap: wrap;
    }

    .filter-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(0, 0, 0, 0.3);
      color: var(--text-secondary);
      padding: 0.6rem 1.2rem;
      border-radius: var(--radius-lg);
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition-base);
      backdrop-filter: blur(10px);
    }

    .filter-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: var(--primary);
      color: var(--text-primary);
      transform: translateY(-1px);
    }

    .filter-btn--active {
      background: var(--primary);
      border-color: var(--primary);
      color: var(--white);
    }

    .filter-btn--active:hover {
      background: var(--primary-dark);
      border-color: var(--primary-dark);
    }


    .projects-container {
      display: flex;
      gap: var(--space-lg);
      overflow-x: auto;
      overflow-y: hidden;
      padding: var(--space-md) 0 calc(var(--space-md) + 10px) 0;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
      scroll-snap-type: x mandatory;
      scrollbar-width: thin;
      scrollbar-color: var(--border) transparent;
      /* Ensure container has proper width */
      width: 100%;
      /* Add momentum scrolling for iOS */
      -webkit-overflow-scrolling: touch;
      /* Hide scrollbar but keep functionality */
      -ms-overflow-style: -ms-autohiding-scrollbar;
      /* Add padding to show scrollbar space */
      margin-bottom: 10px;
    }


    .project-card {
      flex: 0 0 280px;
      min-width: 280px;
      max-width: 280px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(0, 0, 0, 0.3);
      border-radius: var(--radius-lg);
      overflow: hidden;
      backdrop-filter: blur(10px);
      transition: transform var(--transition-base), box-shadow var(--transition-base);
      min-height: 240px;
      scroll-snap-align: start;
      /* Ensure cards maintain their size */
      flex-shrink: 0;
    }

    .project-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .project-image {
      height: 120px;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .project-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform var(--transition-base);
    }

    .project-card:hover .project-image img {
      transform: scale(1.05);
    }

    .project-info {
      padding: var(--space-md);
    }

    .project-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: var(--space-xs);
      line-height: 1.2;
    }

    .project-card .project-info .project-description {
      font-size: 1.0rem;
      color: var(--text-secondary);
      line-height: 1.3;
      margin-bottom: var(--space-sm);
    }

    .project-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.25rem;
    }

    .project-tag {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-secondary);
      padding: 0.15rem 0.4rem;
      border-radius: var(--radius-sm);
      font-size: 0.65rem;
      font-weight: 500;
      border: 1px solid rgba(0, 0, 0, 0.2);
    }

    /* Experience/Skills section specific styles */
    .experience-header {
      text-align: left;
      max-width: 88vw;
      margin-top: 12vh;
    }

    .experience-title {
      font-size: clamp(3.5rem, 10vw, 8rem);
      font-weight: 800;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      color: var(--text-primary);
      line-height: 0.9;
      margin-bottom: var(--space-xl);
    }

    .skills-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--space-lg);
      margin-top: var(--space-xl);
    }

    .skills-column h3 {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: var(--space-sm);
    }

    .skills-column ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .skills-column li {
      padding: var(--space-xs) 0;
      color: var(--text-secondary);
      font-size: 1rem;
    }

    @media (max-width: 768px) {
      .nav-dots { right: 1rem; }
      .section-content { padding: 1.25rem; }
      .hero-header { left: 5vw; top: 10vh; }
      .hero-headline { width: 86vw; font-size: clamp(3rem, 16vw, 10rem); }
      
      .about-header { margin-left: 5vw; margin-top: 10vh; max-width: 90vw; }
      .about-image { position: static; transform: none; max-width: 100%; margin-top: var(--space-lg); }
      .about-title { font-size: clamp(2.5rem, 12vw, 5rem); }
      .about-stats { flex-direction: column; gap: var(--space-md); }
      .stat-card { min-width: auto; }
      
      .projects-header { margin-left: 5vw; margin-top: 6vh; max-width: 90vw; }
      .projects-title { font-size: clamp(2.5rem, 12vw, 5rem); }
      .projects-description { max-width: 90vw; }
      .project-card { flex: 0 0 250px; min-width: 250px; max-width: 250px; }
      
      .experience-header { margin-left: 5vw; margin-top: 10vh; max-width: 90vw; }
      .experience-title { font-size: clamp(2.5rem, 12vw, 5rem); }
      .skills-container { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: var(--space-md); }
    }
  </style>
</head>
<body>
  <div class="page-container"></div>

  <div class="sections-wrapper" id="sectionsWrapper">

    <div id="hero" class="drawer-section drawer-section--has-bg" data-section="0">
      <!-- Background layer -->
      <div class="drawer-bg" aria-hidden="true">
        <canvas id="drawerHeroCanvas" class="drawer-hero-canvas"></canvas>
        <div class="hero__lines" aria-hidden="true"></div>
      </div>
      <!-- Fixed navigation bar (does not fade) -->
      <div class="hero-nav">
        <div class="nav-text">Portfolio</div>
        <div class="nav-links">
          <a href="https://github.com" class="nav-link">github</a>
          <a href="" class="nav-link">about</a>
          <a href="#" class="nav-link">contact</a>
        </div>
      </div>
      <div class="section-content">
        <div class="hero-header">
          <div class="hero-headline">EXPERIENCE</div>
          <p>Experience the future of web design with smooth, engaging scroll interactions that tell your story one layer at a time.</p>
        </div>
      </div>
    </div>

    <div id="about" class="drawer-section" data-section="1">
      <div class="section-content">
        <div class="about-header">
          <div class="about-title">About Me /</div>
          <div class="about-description">
            <p>I'm a creative developer with a passion for transforming ideas into exceptional digital experiences. With expertise in modern web technologies, I specialize in creating interactive, accessible, and performant websites.</p>
            <p>My approach combines technical precision with creative problem-solving, ensuring every project not only looks beautiful but also delivers outstanding user experiences across all devices.</p>
          </div>
          
          <div class="about-stats">
            <div class="stat-card">
              <h3 class="stat-number">5+</h3>
              <p class="stat-label">Years Experience</p>
            </div>
            <div class="stat-card">
              <h3 class="stat-number">50+</h3>
              <p class="stat-label">Projects Completed</p>
            </div>
            <div class="stat-card">
              <h3 class="stat-number">98%</h3>
              <p class="stat-label">Client Satisfaction</p>
            </div>
          </div>
        </div>
        
        <div class="about-image">
          <div class="about-image-container">
            <img src="assets/business-presentation.svg" alt="Working on a project" class="about-photo" width="800" height="600" loading="lazy">
          </div>
        </div>
      </div>
    </div>

    <div id="projects" class="drawer-section" data-section="2">
      <div class="section-content">
        <div class="projects-header">
          <div class="projects-title">Projects /</div>
          
          <div class="projects-filters">
            <button class="filter-btn filter-btn--active" data-filter="all" type="button">All</button>
            <button class="filter-btn" data-filter="web" type="button">Data Science</button>
            <button class="filter-btn" data-filter="ml" type="button">Machine Learning</button>
            <button class="filter-btn" data-filter="sql" type="button">SQL/Database</button>
          </div>
          
          <div class="projects-container">
            <div class="project-card" data-category="web">
              <div class="project-image">
                <img src="https://github.com/laoSVM/2022-Travelers-Insurance-Modeling/blob/main/Image/new%20car.png?raw=true" alt="Travelers Auto Quote Conversion" loading="lazy">
              </div>
              <div class="project-info">
                <h3 class="project-title">Travelers - Auto Quote Conversion</h3>
                <p class="project-description">Data science project that covers predictive modeling and BI dashboard.</p>
                <div class="project-tags">
                  <span class="project-tag">Data Science</span>
                  <span class="project-tag">Predictive Modeling</span>
                  <span class="project-tag">BI Dashboard</span>
                </div>
              </div>
            </div>
            
            <div class="project-card" data-category="web">
              <div class="project-image">
                <img src="https://github.com/laoSVM/2022-Better-Working-World-Data-Challenge/blob/main/Global%20Semifinalist.jpg?raw=true" alt="EY Local Frog Discovery" loading="lazy">
              </div>
              <div class="project-info">
                <h3 class="project-title">EY - Local Frog Discovery</h3>
                <p class="project-description">Using climate data queried from Microsoft Planetary Computer API to protect species diversification.</p>
                <div class="project-tags">
                  <span class="project-tag">Python</span>
                  <span class="project-tag">API Integration</span>
                  <span class="project-tag">Climate Data</span>
                </div>
              </div>
            </div>
            
            <div class="project-card" data-category="ml">
              <div class="project-image">
                <img src="https://github.com/laoSVM/Texas-Energy-Demand-Forecasting/blob/main/Clean%20Energy.jpg?raw=true" alt="Texas Energy Demand Forecasting" loading="lazy">
              </div>
              <div class="project-info">
                <h3 class="project-title">Texas Energy Demand Forecasting</h3>
                <p class="project-description">Applied LSTM on a time series forecasting problem.</p>
                <div class="project-tags">
                  <span class="project-tag">LSTM</span>
                  <span class="project-tag">Time Series</span>
                  <span class="project-tag">Deep Learning</span>
                </div>
              </div>
            </div>
            
            <div class="project-card" data-category="ml">
              <div class="project-image">
                <img src="https://github.com/laoSVM/Guitar-Type-Detection-Using-CNNs/blob/main/2_WithVGG16_Model.png?raw=true" alt="Guitar Type Identification" loading="lazy">
              </div>
              <div class="project-info">
                <h3 class="project-title">Guitar Type Identification</h3>
                <p class="project-description">Collected images through Google using web scraping. Trained CNN with VGG16 to identify different guitars.</p>
                <div class="project-tags">
                  <span class="project-tag">CNN</span>
                  <span class="project-tag">VGG16</span>
                  <span class="project-tag">Web Scraping</span>
                </div>
              </div>
            </div>
            
            <div class="project-card" data-category="sql">
              <div class="project-image">
                <img src="https://github.com/laoSVM/POTOO-SQL/blob/main/cover.jpg?raw=true" alt="POTOO SQL Project" loading="lazy">
              </div>
              <div class="project-info">
                <h3 class="project-title">POTOO</h3>
                <p class="project-description">We focused on improving inventory visibility for the company using SQL.</p>
                <div class="project-tags">
                  <span class="project-tag">SQL</span>
                  <span class="project-tag">Data Analysis</span>
                  <span class="project-tag">Inventory Management</span>
                </div>
              </div>
            </div>
            
            <div class="project-card" data-category="sql">
              <div class="project-image">
                <img src="https://github.com/laoSVM/Business-Tickets-System/blob/main/ERD.png?raw=true" alt="Business Tickets System" loading="lazy">
              </div>
              <div class="project-info">
                <h3 class="project-title">Business Tickets System</h3>
                <p class="project-description">A SQL project from creating schema to generating report.</p>
                <div class="project-tags">
                  <span class="project-tag">SQL</span>
                  <span class="project-tag">Database Design</span>
                  <span class="project-tag">Schema</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="experience" class="drawer-section" data-section="3">
      <div class="section-content">
        <div class="experience-header">
          <div class="experience-title">Skills /</div>
          <div class="skills-container">
            <div class="skills-column">
              <h3>Data Science</h3>
              <ul>
                <li>Python</li>
                <li>R</li>
                <li>Pandas</li>
                <li>NumPy</li>
                <li>Scikit-learn</li>
              </ul>
            </div>
            <div class="skills-column">
              <h3>Machine Learning</h3>
              <ul>
                <li>TensorFlow</li>
                <li>PyTorch</li>
                <li>Keras</li>
                <li>LSTM</li>
                <li>CNN</li>
              </ul>
            </div>
            <div class="skills-column">
              <h3>Database & Analytics</h3>
              <ul>
                <li>SQL</li>
                <li>PostgreSQL</li>
                <li>MongoDB</li>
                <li>Tableau</li>
                <li>Power BI</li>
              </ul>
            </div>
            <div class="skills-column">
              <h3>Development Tools</h3>
              <ul>
                <li>Git</li>
                <li>Docker</li>
                <li>AWS</li>
                <li>Jupyter</li>
                <li>VS Code</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="drawer-section" data-section="4" id="connect">
      <div class="section-content">
        <h1>Let's Connect</h1>
        <p>Ready to transform your digital presence? Let's create something extraordinary together.</p>
        <a href="#" class="cta-button">Get In Touch</a>
      </div>
    </div>
  </div>

  <div class="scroll-indicator" id="scrollIndicator">
    <svg viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
    <div class="scroll-text">Scroll to explore</div>
  </div>

  <div class="nav-dots" id="navDots"></div>

  <script>
    // Lightweight particle system for the first section only (themed)
    class DrawerParticleSystem {
      constructor(canvas) {
        this.canvas = canvas;
        this.ctx = canvas.getContext('2d');
        this.particles = [];
        this.mousePosition = { x: 0, y: 0 };
        this.primaryHex = this.getCssVar('--primary') || '#8B4513';
        this.primaryRgb = this.hexToRgb(this.primaryHex) || { r: 139, g: 69, b: 19 };

        this.resize();
        this.setupCanvas();
        this.createParticles();
        this.bindEvents();
        this.animate();
      }

      getCssVar(name) {
        return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
      }

      hexToRgb(hex) {
        const normalized = hex.startsWith('#') ? hex.slice(1) : hex;
        if (normalized.length === 3) {
          const r = parseInt(normalized[0] + normalized[0], 16);
          const g = parseInt(normalized[1] + normalized[1], 16);
          const b = parseInt(normalized[2] + normalized[2], 16);
          return { r, g, b };
        }
        if (normalized.length === 6) {
          const r = parseInt(normalized.slice(0, 2), 16);
          const g = parseInt(normalized.slice(2, 4), 16);
          const b = parseInt(normalized.slice(4, 6), 16);
          return { r, g, b };
        }
        return null;
      }

      setupCanvas() {
        this.ctx.imageSmoothingEnabled = true;
        this.ctx.imageSmoothingQuality = 'high';
        this.ctx.lineWidth = 0;
        this.ctx.strokeStyle = 'transparent';
      }

      resize() {
        const rect = this.canvas.getBoundingClientRect();
        this.canvas.width = Math.max(1, Math.round(rect.width));
        this.canvas.height = Math.max(1, Math.round(rect.height));
      }

      bindEvents() {
        window.addEventListener('resize', () => {
          this.resize();
          this.particles = [];
          this.createParticles();
        });

        document.addEventListener('mousemove', (e) => {
          const rect = this.canvas.getBoundingClientRect();
          this.mousePosition.x = e.clientX - rect.left;
          this.mousePosition.y = e.clientY - rect.top;
        });
      }

      createParticles() {
        const area = this.canvas.width * this.canvas.height;
        const count = Math.floor(area / 20000);
        for (let i = 0; i < count; i++) {
          this.particles.push({
            x: Math.random() * this.canvas.width,
            y: Math.random() * this.canvas.height,
            vx: (Math.random() - 0.5) * 0.5,
            vy: (Math.random() - 0.5) * 0.5,
            size: Math.random() * 1.5 + 0.8,
            opacity: Math.random() * 0.3 + 0.3,
            baseX: 0,
            baseY: 0
          });
        }
        this.particles.forEach(p => { p.baseX = p.x; p.baseY = p.y; });
      }

      animate() {
        const ctx = this.ctx;
        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

        // update and draw particles
        for (let i = 0; i < this.particles.length; i++) {
          const p = this.particles[i];
          const dx = this.mousePosition.x - p.x;
          const dy = this.mousePosition.y - p.y;
          const dist = Math.hypot(dx, dy);
          const maxD = 100;
          if (dist < maxD) {
            const force = (maxD - dist) / maxD;
            const angle = Math.atan2(dy, dx);
            p.vx -= Math.cos(angle) * force * 0.5;
            p.vy -= Math.sin(angle) * force * 0.5;
          }
          p.vx += (p.baseX - p.x) * 0.01;
          p.vy += (p.baseY - p.y) * 0.01;
          p.vx *= 0.98;
          p.vy *= 0.98;
          p.x += p.vx;
          p.y += p.vy;
          if (p.x < 0) p.x = this.canvas.width;
          if (p.x > this.canvas.width) p.x = 0;
          if (p.y < 0) p.y = this.canvas.height;
          if (p.y > this.canvas.height) p.y = 0;

          ctx.save();
          ctx.globalAlpha = p.opacity;
          ctx.fillStyle = this.primaryHex;
          ctx.beginPath();
          ctx.arc(Math.round(p.x), Math.round(p.y), p.size, 0, Math.PI * 2);
          ctx.fill();
          ctx.restore();
        }

        // draw connections
        for (let i = 0; i < this.particles.length; i++) {
          for (let j = i + 1; j < this.particles.length; j++) {
            const a = this.particles[i];
            const b = this.particles[j];
            const dx = a.x - b.x;
            const dy = a.y - b.y;
            const d = Math.hypot(dx, dy);
            if (d < 100) {
              const alpha = 0.1 * (1 - d / 100);
              this.ctx.strokeStyle = `rgba(${this.primaryRgb.r}, ${this.primaryRgb.g}, ${this.primaryRgb.b}, ${alpha})`;
              this.ctx.beginPath();
              this.ctx.moveTo(a.x, a.y);
              this.ctx.lineTo(b.x, b.y);
              this.ctx.stroke();
            }
          }
        }

        requestAnimationFrame(() => this.animate());
      }
    }

    const sections = Array.from(document.querySelectorAll('.drawer-section'));
    const navDotsContainer = document.getElementById('navDots');
    const scrollIndicator = document.getElementById('scrollIndicator');
    const progressBar = document.getElementById('progressBar');

    const TOTAL_SECTIONS = sections.length;
    let SECTION_HEIGHT = window.innerHeight * 1.2;

    // create nav dots
    sections.forEach((section, i) => {
      const dot = document.createElement('div');
      dot.className = 'nav-dot' + (i === 0 ? ' active' : '');
      dot.dataset.sectionId = section.id; // Associate dot with section ID
      dot.addEventListener('click', () => {
        // Use the section height calculation for smooth scrolling
        window.scrollTo({ top: i * SECTION_HEIGHT, behavior: 'smooth' });
      });
      navDotsContainer.appendChild(dot);
    });
    const navDots = Array.from(document.querySelectorAll('.nav-dot'));

    const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

    function handleScroll() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
      const scrollProgress = maxScroll > 0 ? clamp(scrollTop / maxScroll, 0, 1) : 0;
      if (progressBar) progressBar.style.width = `${scrollProgress * 100}%`;

      // Update active nav dot
      updateActiveNavDot();

      // Reset all contents to visible by default (we only fade specific previous content during slide)
      sections.forEach((s) => {
        const c = s.querySelector('.section-content');
        if (c) c.style.opacity = '1';
      });

      sections.forEach((section, index) => {
        const content = section.querySelector('.section-content');
        // first section: keep background fixed, fade content as we scroll away
        if (index === 0) {
          section.style.transform = 'translateY(0)'; // background stays put
          const fadeProgress = clamp(scrollTop / SECTION_HEIGHT, 0, 1);
          if (content) content.style.opacity = String(Math.max(0, 1 - fadeProgress * 0.95));
          return;
        }

        const sectionStart = (index - 1) * SECTION_HEIGHT;
        const sectionEnd = index * SECTION_HEIGHT;

        // before we reach the section: keep it positioned below viewport
        if (scrollTop < sectionStart) {
          section.style.transform = 'translateY(100vh)';
          return;
        }

        // while the section is sliding up into view
        if (scrollTop >= sectionStart && scrollTop <= sectionEnd) {
          const slideProgress = clamp((scrollTop - sectionStart) / SECTION_HEIGHT, 0, 1);
          const translateY = (1 - slideProgress) * 100; // vh
          section.style.transform = `translateY(${translateY}vh)`;

          // fade ONLY the previous section's content (so the previous background stays intact)
          const prevContent = sections[index - 1].querySelector('.section-content');
          if (prevContent) prevContent.style.opacity = String(Math.max(0, 1 - slideProgress * 0.95));

          // incoming section content stays visible
          if (content) content.style.opacity = '1';
          return;
        }

        // fully in view
        if (scrollTop > sectionEnd) {
          section.style.transform = 'translateY(0)';
          if (content) content.style.opacity = '1';
        }
      });

      // hide hint after some scroll
      scrollIndicator.style.opacity = (scrollTop > 100 ? '0' : '1');

      // subtle parallax on shapes (none remain, but kept for completeness if added later)
    //   document.querySelectorAll('.bg-shape').forEach((shape, i) => {
    //     const speed = (i + 1) * 0.04;
    //     shape.style.transform = `translateY(${-(scrollTop * speed)}px)`;
    //   });
    }

    function initPositions() {
      SECTION_HEIGHT = window.innerHeight * 1.2;
      sections.forEach((s, i) => {
        if (i === 0) {
          s.style.transform = 'translateY(0)';
        } else {
          s.style.transform = 'translateY(100vh)';
        }
        const c = s.querySelector('.section-content');
        if (c) c.style.opacity = '1';
      });
    }

    // Function to update active nav dot based on scroll position
    function updateActiveNavDot() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const currentSectionFloat = scrollTop / SECTION_HEIGHT;
      const currentSectionIndex = Math.round(currentSectionFloat);
      
      // Update nav dots
      navDots.forEach((dot, i) => {
        dot.classList.toggle('active', i === currentSectionIndex);
      });
    }

    // Initialize particle system for the first section only
    const drawerCanvas = document.getElementById('drawerHeroCanvas');
    let drawerParticleSystem = null;
    if (drawerCanvas) {
      drawerParticleSystem = new DrawerParticleSystem(drawerCanvas);
    }

    window.addEventListener('scroll', handleScroll, { passive: true });
    window.addEventListener('resize', () => { initPositions(); handleScroll(); });

    initPositions();
    handleScroll();

    // Project filtering functionality
    function initProjectFilters() {
      const filterButtons = document.querySelectorAll('.filter-btn');
      const projectCards = document.querySelectorAll('.project-card');

      filterButtons.forEach(button => {
        button.addEventListener('click', () => {
          const filter = button.dataset.filter;
          
          // Update active button
          filterButtons.forEach(btn => btn.classList.remove('filter-btn--active'));
          button.classList.add('filter-btn--active');
          
          // Filter projects
          projectCards.forEach(card => {
            const category = card.dataset.category;
            if (filter === 'all' || category === filter) {
              card.style.display = 'block';
              card.style.opacity = '1';
              card.style.transform = 'scale(1)';
            } else {
              card.style.display = 'none';
              card.style.opacity = '0';
              card.style.transform = 'scale(0.9)';
            }
          });
        });
      });
    }

    // Initialize project filters
    initProjectFilters();
  </script>
</body>
</html>
