<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Drawer Scroll Effect — content-only fade</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: #0a0a0a;
      overflow-x: hidden;
      overflow-y: auto;
    }

    /* creates scrollable space */
    .page-container { height: 600vh; position: relative; }

    /* fixed viewport wrapper that holds absolute sections */
    .sections-wrapper {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100vh;
      pointer-events: none; /* let page scrolling pass through; each section itself allows interactions */
    }

    /* each full-screen layer */
    .drawer-section {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: auto; /* allow clicks inside */
      /* only translate for sliding — no scale, no opacity on the section itself */
      transition: transform 320ms cubic-bezier(.2,.9,.2,1);
      will-change: transform;
    }

    /* stacking order (later sections above earlier ones) */
    .drawer-section:nth-child(1){ z-index: 1; background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); }
    .drawer-section:nth-child(2){ z-index: 2; background: linear-gradient(135deg,#f093fb 0%,#f5576c 100%); }
    .drawer-section:nth-child(3){ z-index: 3; background: linear-gradient(135deg,#4facfe 0%,#00f2fe 100%); }
    .drawer-section:nth-child(4){ z-index: 4; background: linear-gradient(135deg,#43e97b 0%,#38f9d7 100%); }
    .drawer-section:nth-child(5){ z-index: 5; background: linear-gradient(135deg,#fa709a 0%,#fee140 100%); }

    /* content area — this is the only thing that fades */
    .section-content {
      text-align: center; color: #fff; padding: 2rem; max-width: 900px;
      position: relative; z-index: 2;
      transition: opacity 260ms linear;
      will-change: opacity;
    }

    .section-content h1 { font-size: clamp(2.2rem, 7vw, 4.4rem); margin-bottom: 0.75rem; line-height: 1.05; }
    .section-content p { font-size: clamp(1rem, 2vw, 1.3rem); opacity: 0.95; margin-bottom: 1.25rem; font-weight: 300; }

    .cta-button {
      display: inline-block; padding: 0.9rem 2rem;
      background: rgba(255,255,255,0.14); border: 2px solid rgba(255,255,255,0.18);
      border-radius: 40px; color: white; text-decoration: none; font-weight: 500;
      backdrop-filter: blur(8px);
    }

    .scroll-indicator { position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%); z-index: 300; color: #fff; text-align:center; transition: opacity 220ms linear; }
    .scroll-indicator svg{ width: 28px; height: 28px; fill: #fff; opacity: 0.75; }
    .scroll-text { font-size: 0.9rem; opacity: 0.75; margin-top: 0.45rem; }

    .nav-dots { position: fixed; right: 2rem; top: 50%; transform: translateY(-50%); z-index: 300; display:flex; flex-direction: column; gap: 0.9rem; }
    .nav-dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255,255,255,0.25); border: 2px solid rgba(255,255,255,0.35); cursor: pointer; transition: all 180ms ease; }
    .nav-dot.active { background: #fff; transform: scale(1.2); }


    .bg-shape { position: absolute; border-radius: 50%; filter: blur(60px); opacity: 0.18; pointer-events: none; }
    .bg-shape-1 { width: 400px; height: 400px; background: rgba(255,255,255,0.08); top: 10%; left: 10%; }
    .bg-shape-2 { width: 300px; height: 300px; background: rgba(255,255,255,0.12); bottom: 18%; right: 14%; }

    @media (max-width: 768px) {
      .nav-dots { right: 1rem; }
      .section-content { padding: 1.25rem; }
    }
  </style>
</head>
<body>
  <div class="page-container"></div>

  <div class="sections-wrapper" id="sectionsWrapper">
    <div class="drawer-section" data-section="0">
      <div class="bg-shape bg-shape-1"></div>
      <div class="bg-shape bg-shape-2"></div>
      <div class="section-content">
        <h1>Welcome to Innovation</h1>
        <p>Experience the future of web design with smooth, engaging scroll interactions that tell your story one layer at a time.</p>
        <a href="#" class="cta-button">Explore More</a>
      </div>
    </div>

    <div class="drawer-section" data-section="1">
      <div class="bg-shape bg-shape-1"></div>
      <div class="section-content">
        <h1>Crafted Experiences</h1>
        <p>Every scroll reveals a new chapter. We build immersive digital experiences that captivate and convert your audience.</p>
        <a href="#" class="cta-button">Learn How</a>
      </div>
    </div>

    <div class="drawer-section" data-section="2">
      <div class="bg-shape bg-shape-2"></div>
      <div class="section-content">
        <h1>Performance Matters</h1>
        <p>Lightning-fast load times meet stunning visuals. Our solutions are optimized for speed without compromising on beauty.</p>
        <a href="#" class="cta-button">See Results</a>
      </div>
    </div>

    <div class="drawer-section" data-section="3">
      <div class="bg-shape bg-shape-1"></div>
      <div class="section-content">
        <h1>Built to Scale</h1>
        <p>From startups to enterprises, our architecture grows with your ambitions. Robust, reliable, and ready for tomorrow.</p>
        <a href="#" class="cta-button">Start Building</a>
      </div>
    </div>

    <div class="drawer-section" data-section="4">
      <div class="bg-shape bg-shape-2"></div>
      <div class="section-content">
        <h1>Let's Connect</h1>
        <p>Ready to transform your digital presence? Let's create something extraordinary together.</p>
        <a href="#" class="cta-button">Get In Touch</a>
      </div>
    </div>
  </div>

  <div class="scroll-indicator" id="scrollIndicator">
    <svg viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
    <div class="scroll-text">Scroll to explore</div>
  </div>

  <div class="nav-dots" id="navDots"></div>

  <script>
    const sections = Array.from(document.querySelectorAll('.drawer-section'));
    const navDotsContainer = document.getElementById('navDots');
    const scrollIndicator = document.getElementById('scrollIndicator');
    const progressBar = document.getElementById('progressBar');

    const TOTAL_SECTIONS = sections.length;
    let SECTION_HEIGHT = window.innerHeight * 1.2;

    // create nav dots
    sections.forEach((s, i) => {
      const dot = document.createElement('div');
      dot.className = 'nav-dot' + (i === 0 ? ' active' : '');
      dot.addEventListener('click', () => {
        window.scrollTo({ top: i * SECTION_HEIGHT, behavior: 'smooth' });
      });
      navDotsContainer.appendChild(dot);
    });
    const navDots = Array.from(document.querySelectorAll('.nav-dot'));

    const clamp = (v, a, b) => Math.max(a, Math.min(b, v));

    function handleScroll() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
      const scrollProgress = maxScroll > 0 ? clamp(scrollTop / maxScroll, 0, 1) : 0;
      progressBar.style.width = `${scrollProgress * 100}%`;

      const currentSectionFloat = scrollTop / SECTION_HEIGHT;
      navDots.forEach((dot, i) => dot.classList.toggle('active', i === Math.round(currentSectionFloat)));

      // Reset all contents to visible by default (we only fade specific previous content during slide)
      sections.forEach((s) => {
        const c = s.querySelector('.section-content');
        if (c) c.style.opacity = '1';
      });

      sections.forEach((section, index) => {
        const content = section.querySelector('.section-content');
        // first section: keep background fixed, fade content as we scroll away
        if (index === 0) {
          section.style.transform = 'translateY(0)'; // background stays put
          const fadeProgress = clamp(scrollTop / SECTION_HEIGHT, 0, 1);
          if (content) content.style.opacity = String(Math.max(0, 1 - fadeProgress * 0.95));
          return;
        }

        const sectionStart = (index - 1) * SECTION_HEIGHT;
        const sectionEnd = index * SECTION_HEIGHT;

        // before we reach the section: keep it positioned below viewport
        if (scrollTop < sectionStart) {
          section.style.transform = 'translateY(100vh)';
          // content left visible (unless later faded by other logic)
          return;
        }

        // while the section is sliding up into view
        if (scrollTop >= sectionStart && scrollTop <= sectionEnd) {
          const slideProgress = clamp((scrollTop - sectionStart) / SECTION_HEIGHT, 0, 1);
          const translateY = (1 - slideProgress) * 100; // vh
          section.style.transform = `translateY(${translateY}vh)`;

          // fade ONLY the previous section's content (so the previous background stays intact)
          const prevContent = sections[index - 1].querySelector('.section-content');
          if (prevContent) prevContent.style.opacity = String(Math.max(0, 1 - slideProgress * 0.95));

          // If this is the LAST section, we intentionally DO NOT fade its content
          if (index === TOTAL_SECTIONS - 1) {
            if (content) content.style.opacity = '1';
          } else {
            // normal incoming section content stays visible
            if (content) content.style.opacity = '1';
          }
          return;
        }

        // fully in view
        if (scrollTop > sectionEnd) {
          section.style.transform = 'translateY(0)';
          // content should be fully visible for all except if we want a special case (not here)
          if (content) content.style.opacity = '1';
        }
      });

      // hide hint after some scroll
      scrollIndicator.style.opacity = (scrollTop > 100 ? '0' : '1');

      // subtle parallax on shapes
      document.querySelectorAll('.bg-shape').forEach((shape, i) => {
        const speed = (i + 1) * 0.04;
        shape.style.transform = `translateY(${-(scrollTop * speed)}px)`;
      });
    }

    function initPositions() {
      SECTION_HEIGHT = window.innerHeight * 1.2;
      sections.forEach((s, i) => {
        if (i === 0) {
          s.style.transform = 'translateY(0)';
        } else {
          s.style.transform = 'translateY(100vh)';
        }
        const c = s.querySelector('.section-content');
        if (c) c.style.opacity = '1';
      });
    }

    window.addEventListener('scroll', handleScroll, { passive: true });
    window.addEventListener('resize', () => { initPositions(); handleScroll(); });

    initPositions();
    handleScroll();
  </script>
</body>
</html>